{"kind":"Dashboard","metadata":{"name":"IgXOThN7ztest","createdAt":"0001-01-01T00:00:00Z","updatedAt":"0001-01-01T00:00:00Z","version":0,"project":"pp"},"spec":{"display":{"name":"KubeDB / Postgres / Pod"},"variables":[{"kind":"ListVariable","spec":{"display":{"hidden":false},"defaultValue":"bf4kuw0mhvthcb","allowAllValue":false,"allowMultiple":false,"plugin":{"kind":"StaticListVariable","spec":{"values":["grafana","migration","not","supported"]}},"name":"datasource"}},{"kind":"ListVariable","spec":{"display":{"name":"Namespace","hidden":false},"allowAllValue":false,"allowMultiple":false,"plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"labelName":"namespace","matchers":["kube_namespace_created"]}},"name":"namespace"}},{"kind":"ListVariable","spec":{"display":{"name":"postgres","hidden":false},"allowAllValue":false,"allowMultiple":false,"sort":"alphabetical-asc","plugin":{"kind":"PrometheusPromQLVariable","spec":{"expr":"query_result(kubedb_com_postgres_created{namespace=\"$namespace\"})","labelName":"migration_from_grafana_not_supported"}},"name":"app"}},{"kind":"ListVariable","spec":{"display":{"name":"pod","hidden":false},"allowAllValue":false,"allowMultiple":false,"plugin":{"kind":"PrometheusLabelValuesVariable","spec":{"labelName":"pod","matchers":["pg_up{namespace=~\"$namespace\",pod=~\"${app}-.*\"}"]}},"name":"pod"}}],"panels":{"0_0":{"kind":"Panel","spec":{"display":{"name":"Server Up","description":"Server Up"},"plugin":{"kind":"StatChart","spec":{"calculation":"mean","format":{"unit":"decimal"},"mappings":[{"kind":"Value","spec":{"result":{"color":"#ffffff","value":"No"},"value":"0"}},{"kind":"Value","spec":{"result":{"color":"#ffffff","value":"Yes"},"value":"1"}}],"thresholds":{"steps":[{"color":"#ffffff","value":0}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_up{namespace=\"$namespace\", pod=\"$pod\"}","seriesNameFormat":""}}}}]}},"0_1":{"kind":"Panel","spec":{"display":{"name":"Role","description":"Database Pod Role(Primary or Secondary)"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"bytes"},"mappings":[{"kind":"Value","spec":{"result":{"value":"Secondary"},"value":"Null"}},{"kind":"Range","spec":{"from":1,"result":{"color":"#ffffff","value":"Primary"},"to":100000000000}},{"kind":"Misc","spec":{"result":{"color":"#ffffff","value":"Secondary"},"value":"null"}}],"thresholds":{"steps":[{"color":"#ffffff","value":0}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"count(pg_stat_replication_reply_time{namespace = \"$namespace\", pod=\"$pod\"})","seriesNameFormat":""}}}}]}},"0_2":{"kind":"Panel","spec":{"display":{"name":"Go Routines","description":"Number of goroutines that currently exist."},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","thresholds":{"steps":[{"color":"#ffffff","value":0}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"go_goroutines{namespace=\"$namespace\", pod=\"$pod\"}","seriesNameFormat":""}}}}]}},"0_3":{"kind":"Panel","spec":{"display":{"name":"Current fetch data"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"decbytes"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#ffffff","value":0}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"SUM(pg_stat_database_tup_fetched{pod=\"$pod\", namespace=\"$namespace\"})","seriesNameFormat":""}}}}]}},"0_4":{"kind":"Panel","spec":{"display":{"name":"Current insert data"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"decbytes"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#ffffff","value":0}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"SUM(pg_stat_database_tup_inserted{pod=\"$pod\", namespace=\"$namespace\"})","seriesNameFormat":""}}}}]}},"0_5":{"kind":"Panel","spec":{"display":{"name":"Current update data"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"decbytes"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#ffffff","value":0}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"SUM(pg_stat_database_tup_updated{pod=\"$pod\", namespace=\"$namespace\"})","seriesNameFormat":""}}}}]}},"0_6":{"kind":"Panel","spec":{"display":{"name":"Max Connections"},"plugin":{"kind":"StatChart","spec":{"calculation":"mean","format":{"unit":"decimal"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#ffffff","value":0}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_settings_max_connections{pod=\"$pod\", namespace=\"$namespace\"}","seriesNameFormat":""}}}}]}},"0_7":{"kind":"Panel","spec":{"display":{"name":"Average CPU Usage","description":"Average user and system CPU time spent in seconds."},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"table","position":"bottom","values":["mean","last-number","max","min"]},"visual":{"areaOpacity":0.1,"connectNulls":false,"display":"line","lineWidth":1},"yAxis":{"format":{"unit":"seconds"}}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"avg(rate(process_cpu_seconds_total{pod=\"$pod\", namespace=\"$namespace\"}[5m]) * 1000)","seriesNameFormat":"CPU Time"}}}}]}},"0_8":{"kind":"Panel","spec":{"display":{"name":"Average Memory Usage","description":"Virtual and Resident memory size in bytes, averages over 5 min interval"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"table","position":"bottom","values":["mean","last-number","max","min"]},"visual":{"areaOpacity":0.1,"connectNulls":false,"display":"line","lineWidth":1},"yAxis":{"format":{"unit":"decbytes"}}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"avg(rate(process_resident_memory_bytes{pod=\"$pod\", namespace=\"$namespace\"}[5m]))","seriesNameFormat":"Resident Mem"}}}},{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"avg(rate(process_virtual_memory_bytes{pod=\"$pod\", namespace=\"$namespace\"}[5m]))","seriesNameFormat":"Virtual Mem"}}}}]}},"0_9":{"kind":"Panel","spec":{"display":{"name":"Open File Descriptors","description":"Number of open file descriptors"},"plugin":{"kind":"TimeSeriesChart","spec":{"legend":{"mode":"table","position":"bottom","values":["mean","last-number","max","min"]},"visual":{"areaOpacity":0.1,"connectNulls":false,"display":"line","lineWidth":1},"yAxis":{"format":{"unit":"decimal"}}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"SUM(process_open_fds{pod=\"$pod\", namespace=\"$namespace\"}) by (pod)","seriesNameFormat":"Open FD"}}}}]}},"1_0":{"kind":"Panel","spec":{"display":{"name":"Shared Buffers"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"bytes"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#73bf69","value":0},{"color":"#f2495c","value":80}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_settings_shared_buffers_bytes{pod=\"$pod\", namespace=\"$namespace\"}","seriesNameFormat":""}}}}]}},"1_1":{"kind":"Panel","spec":{"display":{"name":"Effective Cache"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"bytes"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#73bf69","value":0},{"color":"#f2495c","value":80}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_settings_effective_cache_size_bytes{pod=\"$pod\", namespace=\"$namespace\"}","seriesNameFormat":""}}}}]}},"1_2":{"kind":"Panel","spec":{"display":{"name":"Maintenance Work Mem"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"bytes"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#73bf69","value":0},{"color":"#f2495c","value":80}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_settings_maintenance_work_mem_bytes{pod=\"$pod\", namespace=\"$namespace\"}","seriesNameFormat":""}}}}]}},"1_3":{"kind":"Panel","spec":{"display":{"name":"Work Mem"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"bytes"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#73bf69","value":0},{"color":"#f2495c","value":80}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_settings_work_mem_bytes{pod=\"$pod\", namespace=\"$namespace\"}","seriesNameFormat":""}}}}]}},"1_4":{"kind":"Panel","spec":{"display":{"name":"Max WAL Size"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"decimalPlaces":1,"unit":"bytes"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#73bf69","value":0},{"color":"#f2495c","value":80}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_settings_max_wal_size_bytes{pod=\"$pod\", namespace=\"$namespace\"}","seriesNameFormat":""}}}}]}},"1_5":{"kind":"Panel","spec":{"display":{"name":"Random Page Cost"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"decimal"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#73bf69","value":0},{"color":"#f2495c","value":80}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_settings_random_page_cost{pod=\"$pod\", namespace=\"$namespace\"}","seriesNameFormat":""}}}}]}},"1_6":{"kind":"Panel","spec":{"display":{"name":"Max Worker Processes"},"plugin":{"kind":"StatChart","spec":{"calculation":"mean","format":{"unit":"decimal"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#73bf69","value":0},{"color":"#f2495c","value":80}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_settings_max_worker_processes{pod=\"$pod\", namespace=\"$namespace\"}","seriesNameFormat":""}}}}]}},"1_7":{"kind":"Panel","spec":{"display":{"name":"Max Parallel Workers"},"plugin":{"kind":"StatChart","spec":{"calculation":"last-number","format":{"unit":"decimal"},"mappings":[{"kind":"Misc","spec":{"result":{"value":"N/A"},"value":"null"}}],"thresholds":{"steps":[{"color":"#73bf69","value":0},{"color":"#f2495c","value":80}]}}},"queries":[{"kind":"TimeSeriesQuery","spec":{"plugin":{"kind":"PrometheusTimeSeriesQuery","spec":{"datasource":{"kind":"PrometheusDatasource","name":"${datasource}"},"minStep":"","query":"pg_settings_max_parallel_workers{pod=\"$pod\", namespace=\"$namespace\"}","seriesNameFormat":""}}}}]}}},"layouts":[{"kind":"Grid","spec":{"display":{"title":"General Counters, CPU, Memory and File Descriptor Stats","collapse":{"open":true}},"items":[{"x":0,"y":1,"width":4,"height":3,"content":{"$ref":"#/spec/panels/0_0"}},{"x":4,"y":1,"width":4,"height":3,"content":{"$ref":"#/spec/panels/0_1"}},{"x":8,"y":1,"width":4,"height":3,"content":{"$ref":"#/spec/panels/0_2"}},{"x":12,"y":1,"width":3,"height":3,"content":{"$ref":"#/spec/panels/0_3"}},{"x":15,"y":1,"width":3,"height":3,"content":{"$ref":"#/spec/panels/0_4"}},{"x":18,"y":1,"width":3,"height":3,"content":{"$ref":"#/spec/panels/0_5"}},{"x":21,"y":1,"width":3,"height":3,"content":{"$ref":"#/spec/panels/0_6"}},{"x":0,"y":4,"width":8,"height":7,"content":{"$ref":"#/spec/panels/0_7"}},{"x":8,"y":4,"width":8,"height":7,"content":{"$ref":"#/spec/panels/0_8"}},{"x":16,"y":4,"width":8,"height":7,"content":{"$ref":"#/spec/panels/0_9"}}]}},{"kind":"Grid","spec":{"display":{"title":"Settings","collapse":{"open":true}},"items":[{"x":0,"y":12,"width":3,"height":3,"content":{"$ref":"#/spec/panels/1_0"}},{"x":3,"y":12,"width":3,"height":3,"content":{"$ref":"#/spec/panels/1_1"}},{"x":6,"y":12,"width":3,"height":3,"content":{"$ref":"#/spec/panels/1_2"}},{"x":9,"y":12,"width":3,"height":3,"content":{"$ref":"#/spec/panels/1_3"}},{"x":12,"y":12,"width":3,"height":3,"content":{"$ref":"#/spec/panels/1_4"}},{"x":15,"y":12,"width":3,"height":3,"content":{"$ref":"#/spec/panels/1_5"}},{"x":18,"y":12,"width":3,"height":3,"content":{"$ref":"#/spec/panels/1_6"}},{"x":21,"y":12,"width":3,"height":3,"content":{"$ref":"#/spec/panels/1_7"}}]}}],"duration":"1h"}}
